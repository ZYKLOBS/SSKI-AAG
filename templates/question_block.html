<div class="row mb-4 question-block" id="question-{{ question.id }}">
  <div class="col-6">
    <label class="form-label" for="source-{{ question.id }}">Question</label>
    <textarea class="form-control"
              name="questions[{{ index }}][question]"
              id="source-{{ question.id }}"
              rows="5">{{ question.question }}</textarea>
    <input type="hidden" name="questions[{{ index }}][id]" value="{{ question.id }}">
    <input type="hidden" name="questions[{{ index }}][project_id]" value="{{ question.project_id }}">
  </div>

  <div class="col-6">
    <label class="form-label" for="answer-{{ question.id }}">Answer</label>
    <textarea class="form-control"
              name="questions[{{ index }}][answer]"
              id="answer-{{ question.id }}"
              rows="5"
              oninput="updateWordCount({{ question.id }})">{{ question.answer }}</textarea>
    <small class="form-text text-muted">Word Count: <span id="word-count-{{ question.id }}">0</span></small>

    <div class="mt-2">
      <button type="button" class="btn btn-outline-danger btn-sm"
              hx-post="/delete_question/{{ question.id }}?project_id={{ question.project_id }}"
              hx-target="#main_content"
              hx-swap="outerHTML"
              hx-confirm="Are you sure you want to delete this question?">
        Delete
      </button>
      <button id="regenerate-btn-{{ question.id }}"
                    type="button"
                    class="btn btn-outline-primary btn-sm"
                    hx-post="/regenerate_answer/{{ question.id }}?project_id={{ question.project_id }}"
                    hx-target="#main_content"
                    hx-swap="outerHTML"
                    hx-confirm="Are you sure you want to regenerate the answer?">
              + Generate/Regenerate
              <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            </button>
    </div>

    <div class="input-group input-group-sm mt-2">
      <input type="text" class="form-control" name="refine_prompt" id="refine_prompt_{{ question.id }}"
             placeholder="Additional instructions to refine the answer">
      <button id="refine-btn-{{ question.id }}"
              type="button"
              class="btn btn-outline-primary"
              hx-post="/refine_answer/{{ question.id }}?project_id={{ question.project_id }}"
              hx-target="#main_content"
              hx-swap="outerHTML"
              hx-confirm="Are you sure you want to refine the answer?">
        ðŸ”§ Refine
        <span class="spinner-border spinner-border-sm ms-2" role="status" aria-hidden="true"></span>
      </button>
    </div>
  </div>
</div>
